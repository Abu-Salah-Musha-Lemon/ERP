<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Inventory Management</title>

  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />
  <!-- Toastr CSS -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.css" />

  <style>
    body {
      background-color: #f8f9fa;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    }
    .inventory-form {
      background: white;
      padding: 2rem;
      border-radius: 0.5rem;
      box-shadow: 0 0 15px rgba(0,0,0,0.1);
      margin-bottom: 2rem;
    }
    table thead {
      background-color: #343a40;
      color: white;
    }
    table tbody tr:nth-child(even) {
      background-color: #e9ecef;
    }
  </style>
</head>
<body>
  <div class="container my-5">
    <h2 class="mb-4 text-dark">Inventory Management</h2>

    <form id="inventoryForm" class="inventory-form">
      <div class="row mb-3">
        <div class="col-md-4">
          <label for="productSKU" class="form-label">Product SKU *</label>
          <input type="text" class="form-control" id="productSKU" placeholder="SKU-001" required />
        </div>
        <div class="col-md-8">
          <label for="productName" class="form-label">Product Name *</label>
          <input type="text" class="form-control" id="productName" placeholder="Product Name" required />
        </div>
      </div>

      <div class="row mb-3">
        <div class="col-md-4">
          <label for="category" class="form-label">Category *</label>
          <select class="form-select" id="category" required>
            <option value="" disabled selected>Select category</option>
            <option>Electronics</option>
            <option>Apparel</option>
            <option>Food & Beverage</option>
            <option>Furniture</option>
            <option>Stationery</option>
            <option>Miscellaneous</option>
          </select>
        </div>

        <div class="col-md-4">
          <label for="quantity" class="form-label">Quantity *</label>
          <input type="number" class="form-control" id="quantity" min="0" step="1" placeholder="0" required />
        </div>

        <div class="col-md-4">
          <label for="unitPrice" class="form-label">Unit Price ($) *</label>
          <input type="number" class="form-control" id="unitPrice" min="0" step="0.01" placeholder="0.00" required />
        </div>
      </div>

      <div class="row mb-3">
        <div class="col-md-6">
          <label for="supplier" class="form-label">Supplier *</label>
          <input type="text" class="form-control" id="supplier" placeholder="Supplier Name" required />
        </div>
        <div class="col-md-3">
          <label for="status" class="form-label">Status *</label>
          <select class="form-select" id="status" required>
            <option value="" disabled selected>Select status</option>
            <option value="In Stock">In Stock</option>
            <option value="Out of Stock">Out of Stock</option>
            <option value="Backordered">Backordered</option>
            <option value="Discontinued">Discontinued</option>
          </select>
        </div>
        <div class="col-md-3">
          <label for="reorderLevel" class="form-label">Reorder Level *</label>
          <input type="number" class="form-control" id="reorderLevel" min="0" step="1" placeholder="0" required />
        </div>
      </div>

      <div class="mb-3">
        <label for="description" class="form-label">Description</label>
        <textarea id="description" class="form-control" rows="3" placeholder="Optional additional details"></textarea>
      </div>

      <button type="submit" class="btn btn-primary">Add / Update Inventory</button>
    </form>

    <h3>Inventory List (Demo)</h3>
    <div class="table-responsive">
      <table class="table table-bordered" id="inventoryTable">
        <thead>
          <tr>
            <th>SKU</th>
            <th>Name</th>
            <th>Category</th>
            <th>Quantity</th>
            <th>Unit Price</th>
            <th>Supplier</th>
            <th>Status</th>
            <th>Reorder Level</th>
          </tr>
        </thead>
        <tbody>
          <!-- Dynamic rows -->
        </tbody>
      </table>
    </div>
  </div>

  <!-- jQuery -->
  <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  <!-- Bootstrap JS -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  <!-- Toastr JS -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.js"></script>

  <script>
    $(document).ready(function () {
      $('#inventoryForm').submit(function (e) {
        e.preventDefault();

        const sku = $('#productSKU').val().trim();
        const name = $('#productName').val().trim();
        const category = $('#category').val();
        const quantity = parseInt($('#quantity').val());
        const unitPrice = parseFloat($('#unitPrice').val());
        const supplier = $('#supplier').val().trim();
        const status = $('#status').val();
        const reorderLevel = parseInt($('#reorderLevel').val());
        const description = $('#description').val().trim();

        // Validate
        if (!sku || !name || !category || isNaN(quantity) || quantity < 0 || isNaN(unitPrice) || unitPrice < 0 || !supplier || !status || isNaN(reorderLevel) || reorderLevel < 0) {
          toastr.error('Please fill all required fields correctly.');
          return;
        }

        // Check if SKU exists - update if yes, else add
        let rowFound = false;
        $('#inventoryTable tbody tr').each(function () {
          if ($(this).find('td:first').text() === sku) {
            $(this).html(`
              <td>${sku}</td>
              <td>${name}</td>
              <td>${category}</td>
              <td>${quantity}</td>
              <td>$${unitPrice.toFixed(2)}</td>
              <td>${supplier}</td>
              <td>${status}</td>
              <td>${reorderLevel}</td>
            `);
            rowFound = true;
            return false; // break each loop
          }
        });

        if (!rowFound) {
          $('#inventoryTable tbody').append(`
            <tr>
              <td>${sku}</td>
              <td>${name}</td>
              <td>${category}</td>
              <td>${quantity}</td>
              <td>$${unitPrice.toFixed(2)}</td>
              <td>${supplier}</td>
              <td>${status}</td>
              <td>${reorderLevel}</td>
            </tr>
          `);
        }

        toastr.success(`Inventory ${rowFound ? 'updated' : 'added'} successfully!`);

        this.reset();
      });
    });
  </script>
</body>
</html>
